"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const node_fs_1 = require("node:fs");
const ava_1 = __importDefault(require("ava"));
const __1 = require("./\u8CC7\u6599");
const ____1 = require("./\u97F3\u97FB\u5730\u4F4D");
(0, ava_1.default)('查「東」字的反切', t => {
    const 字頭 = '東';
    const res = (0, __1.query字頭)(字頭);
    t.is(res.length, 1);
    t.is(res[0].反切, '德紅');
});
(0, ava_1.default)('查「拯」字的反切，「拯」字無反切，值為 null', t => {
    const 字頭 = '拯';
    const res = (0, __1.query字頭)(字頭);
    t.is(res.length, 1);
    t.is(res[0].反切, null);
});
(0, ava_1.default)('查同地位不同反切', t => {
    const 地位 = ____1.音韻地位.from描述('見開四添去');
    const 條目 = (0, __1.query音韻地位)(地位);
    t.is(條目.find(({ 字頭 }) => 字頭 === '趝').反切, '紀念');
    t.is(條目.find(({ 字頭 }) => 字頭 === '兼').反切, '古念');
});
(0, ava_1.default)('查音韻地位「見合一歌平」，含「戈」、「過」等字', t => {
    const 當前音韻地位 = ____1.音韻地位.from描述('見合一歌平'); // 注意：戈韻不獨立，屬歌韻
    t.true((0, __1.query音韻地位)(當前音韻地位).length > 0);
});
(0, ava_1.default)('查音韻地位「從合三歌平」，有音無字', t => {
    const 當前音韻地位 = ____1.音韻地位.from描述('從合三歌平');
    t.is((0, __1.query音韻地位)(當前音韻地位).length, 0);
});
(0, ava_1.default)('查詢「之」字', t => {
    const res = (0, __1.query字頭)('之');
    t.is(res.length, 1);
    t.is(res[0].音韻地位.描述, '章開三之平');
    t.is(res[0].釋義, '適也往也閒也亦姓出姓苑止而切四');
});
(0, ava_1.default)('查詢「過」字。「過」字有兩讀', t => {
    const res = (0, __1.query字頭)('過');
    t.is(res.length, 2);
});
(0, ava_1.default)('查詢資料不包含的字，沒有讀音', t => {
    const res = (0, __1.query字頭)('韓'); // 《廣韻》字頭作「𩏑」，同時釋義注「亦作韓」
    t.is(res.length, 0);
});
(0, ava_1.default)('查詢來源', t => {
    t.like((0, __1.query字頭)('茝').find(({ 音韻地位 }) => 音韻地位.屬於('廢韻')), { 來源: { 文獻: '廣韻', 韻目: '海' } });
    t.like((0, __1.query字頭)('韻').find(({ 音韻地位 }) => 音韻地位.屬於('B類')), { 來源: { 文獻: '王三', 韻目: '震' } });
    t.like((0, __1.query字頭)('忘').find(({ 音韻地位 }) => 音韻地位.屬於('去聲')), { 來源: { 文獻: '廣韻', 韻目: '漾' } });
    t.like((0, __1.query字頭)('忘').find(({ 音韻地位 }) => 音韻地位.屬於('平聲')), { 來源: { 文獻: '王三', 韻目: '陽' } });
});
(0, ava_1.default)('根據原資料檔查詢所有字頭', t => {
    for (const line of (0, node_fs_1.readFileSync)('prepare/data.csv', { encoding: 'utf8' }).trimEnd().split('\n').slice(1)) {
        const [, , 韻目原貌, 地位描述1, 原反切1, 字頭1, 原釋義1, 釋義補充1] = line.split(',');
        if (!地位描述1) {
            continue;
        }
        const 反切1 = 原反切1 || null;
        const 釋義1 = 原釋義1 + (釋義補充1 && `（${釋義補充1}）`);
        const 音韻地位1 = ____1.音韻地位.from描述(地位描述1);
        t.true((0, __1.query字頭)(字頭1).some(({ 字頭: 字頭2, 音韻地位: 音韻地位2, 反切: 反切2, 釋義: 釋義2, 來源 }) => {
            return (字頭1 === 字頭2 &&
                音韻地位1.等於(音韻地位2) &&
                反切1 === 反切2 &&
                釋義1 === 釋義2 &&
                來源?.文獻 === '廣韻' &&
                來源.韻目 === 韻目原貌);
        }), line);
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoi6LOH5paZLnNwZWMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvbGliL+izh+aWmS5zcGVjLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEscUNBQXVDO0FBRXZDLDhDQUF1QjtBQUV2QixzQ0FBMEM7QUFDMUMsb0RBQThCO0FBRTlCLElBQUEsYUFBSSxFQUFDLFVBQVUsRUFBRSxDQUFDLENBQUMsRUFBRTtJQUNuQixNQUFNLEVBQUUsR0FBRyxHQUFHLENBQUM7SUFDZixNQUFNLEdBQUcsR0FBRyxJQUFBLFdBQU8sRUFBQyxFQUFFLENBQUMsQ0FBQztJQUN4QixDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDcEIsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQ3hCLENBQUMsQ0FBQyxDQUFDO0FBRUgsSUFBQSxhQUFJLEVBQUMsMEJBQTBCLEVBQUUsQ0FBQyxDQUFDLEVBQUU7SUFDbkMsTUFBTSxFQUFFLEdBQUcsR0FBRyxDQUFDO0lBQ2YsTUFBTSxHQUFHLEdBQUcsSUFBQSxXQUFPLEVBQUMsRUFBRSxDQUFDLENBQUM7SUFDeEIsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ3BCLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQztBQUN4QixDQUFDLENBQUMsQ0FBQztBQUVILElBQUEsYUFBSSxFQUFDLFVBQVUsRUFBRSxDQUFDLENBQUMsRUFBRTtJQUNuQixNQUFNLEVBQUUsR0FBRyxVQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ2hDLE1BQU0sRUFBRSxHQUFHLElBQUEsYUFBUyxFQUFDLEVBQUUsQ0FBQyxDQUFD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